function getmypic(){FB.api("/me?fields=picture",function(a){MePic=a})}function anl_showjoindateinfo(){if(FrObj.length<6){div_joindateinfo_title1.innerHTML+="<br>Not enough friends to rank them by join date.";return}div_joindateinfo_title1.innerHTML+="";div_joindateinfo_title1.innerHTML+="<br>First Facebook joiners:<br>";div_joindateinfo_name1.innerHTML="1. "+FrObj[0].name;div_joindateinfo_name2.innerHTML="2. "+FrObj[1].name;div_joindateinfo_name3.innerHTML="3. "+FrObj[2].name;div_joindateinfo_title2.innerHTML+="<br>Latest Facebook joiners:<br>";div_joindateinfo_name4.innerHTML="1. "+FrObj[FrObj.length-1].name;div_joindateinfo_name5.innerHTML="2. "+FrObj[FrObj.length-2].name;div_joindateinfo_name6.innerHTML="3. "+FrObj[FrObj.length-3].name}function ExtractInteractData(){for(var a=0;a<MyWallObj.data.length;a=a+1){if(MyWallObj.data[a].from.id==MeObj.authResponse.userID&&MyWallObj.data[a].type!="photo"){if(MyWallObj.data[a].comments.data!=undefined){for(var b=0;b<MyWallObj.data[a].comments.data.length;b=b+1){div_debug.innerHTML+=a+"!";for(var c=0;c<FrObj.length;c=c+1){if(MyWallObj.data[a].comments.data[b].from!=undefined){if(FrObj[c].id==MyWallObj.data[a].comments.data[b].from.id){WallInteracts.Comments[c]++;break}}}}}if(MyWallObj.data[a].type=="status"){StatusUpdatesMessages.push(MyWallObj.data[a].message);StatusUpdatesDates.push(MyWallObj.data[a].created_time.substring(0,10));if(MyWallObj.data[a].comments.data!=undefined){StatusUpdatesCommentCount.push(MyWallObj.data[a].comments.count)}else StatusUpdatesCommentCount.push(0);if(MyWallObj.data[a].likes!=undefined){StatusUpdatesLikeCount.push(MyWallObj.data[a].likes.count)}else StatusUpdatesLikeCount.push(0)}}else if(MyWallObj.data[a].to!=undefined){if(MyWallObj.data[a].to.data.length==1&&MyWallObj.data[a].to.data[0].id==MeObj.authResponse.userID){for(var b=0;b<FrObj.length;b=b+1){if(FrObj[b].id==MyWallObj.data[a].from.id){WallInteracts.Posts[b]++;break}}}}}if(MyWallObj.paging!=undefined){$.getJSON(MyWallObj.paging.next,function(a){MyWallObj=a;if(MyWallObj.data.length!=0){ExtractInteractData(a)}else{for(var b=0;b<5;b=b+1){for(var c=0;c<FrObj.length;c=c+1){if(WallInteracts.Posts[c]+WallInteracts.Comments[c]>WallInteracts.Posts[TopInteractorIds[b]]+WallInteracts.Comments[TopInteractorIds[b]]){alreadyinlist=0;for(var d=0;d<5;d=d+1){if(TopInteractorIds[d]==c){alreadyinlist=1;break}}if(alreadyinlist==0){TopInteractorIds[b]=c}}}}for(var b=0;b<5;b=b+1){for(var c=0;c<StatusUpdatesMessages.length;c=c+1){if(StatusUpdatesLikeCount[c]+StatusUpdatesCommentCount[c]>StatusUpdatesLikeCount[TopStatusUpdates[b]]+StatusUpdatesCommentCount[TopStatusUpdates[b]]){alreadyinlist=0;for(var d=0;d<5;d=d+1){if(TopStatusUpdates[d]==c){alreadyinlist=1;break}}if(alreadyinlist==0){TopStatusUpdates[b]=c}}}}div_statusupdates.innerHTML=div_statusupdates.innerHTML.slice(0,-16);div_statusupdates.innerHTML+="These are your top status updates ranked by most comments and likes.";for(i=0;i<5;i=i+1){if(StatusUpdatesCommentCount[TopStatusUpdates[i]]+StatusUpdatesLikeCount[TopStatusUpdates[i]]>0){addstr="";addstr+="<div class='statusupdate'>";if(MePic.picture.data.url!=undefined){addstr+="<img src='"+MePic.picture.data.url+"' class='mepic'>"}if(StatusUpdatesMessages[TopStatusUpdates[i]].length>200){addstr+=StatusUpdatesMessages[TopStatusUpdates[i]].substring(0,200)+" ..."}else{addstr+=StatusUpdatesMessages[TopStatusUpdates[i]]}addstr+="<br><span style='color:gray;'>"+StatusUpdatesDates[TopStatusUpdates[i]]+"   ";addstr+="<img src='msgicon.png' class='smallicon'>"+StatusUpdatesCommentCount[TopStatusUpdates[i]];addstr+="   <img src='likeicon.png' class='smallicon'>"+StatusUpdatesLikeCount[TopStatusUpdates[i]];addstr+="</span></div>";div_statusupdates.innerHTML+=addstr}}div_wallposters.innerHTML=div_wallposters.innerHTML.slice(0,-16);div_wallposters.innerHTML+="The number of posts shown is the sum of the number of posts to your wall and comments on your status updates.<br>";for(b=0;b<5;b=b+1){if(WallInteracts.Posts[TopInteractorIds[b]]+WallInteracts.Comments[TopInteractorIds[b]]>0){addstr="";addstr+="<img src='"+FrObj[TopInteractorIds[b]].picture.data.url+"' style='width:50; float:left; margin:8px;'><br>";addstr+=FrObj[TopInteractorIds[b]].name;addstr+="<br>"+"<img src='msgicon.png' class='smallicon'>"+(WallInteracts.Posts[TopInteractorIds[b]]+WallInteracts.Comments[TopInteractorIds[b]])+" posts";addstr+="<br style='clear: both;'>";div_wallposters.innerHTML+=addstr}}}})}else{div_wallposters.innerHTML=div_wallposters.innerHTML.slice(0,-16);div_wallposters.innerHTML+="<br>Not enough wall posts to show these stats.";return}}function anl_showwallposters(){div_wallposters.innerHTML+="<br>(loading...)";div_statusupdates.innerHTML+="<br>(loading...)";WallInteracts.Posts=new Array(FrObj.length);for(counter=0;counter<FrObj.length;counter=counter+1){WallInteracts.Posts[counter]=0}WallInteracts.Comments=new Array(FrObj.length);for(counter=0;counter<FrObj.length;counter=counter+1){WallInteracts.Comments[counter]=0}WallInteracts.Likes=new Array(FrObj.length);for(counter=0;counter<FrObj.length;counter=counter+1){WallInteracts.Likes[counter]=0}$.getJSON("https://graph.facebook.com/me/feed?access_token="+MeObj.authResponse.accessToken+"&limit=100000",function(a){MyWallObj=a;ExtractInteractData(a)})}function anl_showwallposts(){}function anl_drawgenderpie(){var a=0;var b=0;for(counter=0;counter<FrObj.length;counter=counter+1){if(FrObj[counter].gender=="male"){a=a+1}else if(FrObj[counter].gender=="female"){b=b+1}}if(a+b==0){div_genderpie.innerHTML+="<br>Not enough friends specified their gender to display this graph.";return}div_genderpie.innerHTML+="Of all your Facebook friends "+(a+b)+" specified their gender.";maleperc=(a/(a+b)).toFixed(2);femaleperc=(b/(a+b)).toFixed(2);div_genderpie.innerHTML+='<br><br><img src="https://chart.googleapis.com/chart?cht=p3&chd=t:'+maleperc+","+femaleperc+"&chs=500x150&chf=bg,s,00000000&chl="+parseInt(100*maleperc)+"% "+"male|"+parseInt(100*femaleperc)+"% "+'female">';poststrgender="\n* Gender ratio of my friends: "+parseInt(femaleperc*100)+"% female, "+parseInt(maleperc*100)+"% male"}function anl_drawrelationpies(){var a=0;var b={};for(counter=0;counter<FrObj.length;counter=counter+1){if(FrObj[counter].relationship_status!=undefined){a++;if(b[FrObj[counter].relationship_status]==undefined){b[FrObj[counter].relationship_status]=1}else{b[FrObj[counter].relationship_status]++}}}if(a==0){div_relationpies.innerHTML+="<br>Not enough friends specified their relationship status to display this graph.";return}div_relationpies.innerHTML+="Of all your Facebook friends "+a+" specified their relationship status.";var c;div_relationpies.innerHTML+="<br><br>";var d='<img src="https://chart.googleapis.com/chart?chco=4CC417&cht=p3&chd=t:';for(c in b){d+=(b[c]/a).toFixed(3);d+=","}d=d.slice(0,-1);d+="&chs=500x150&chf=bg,s,00000000&chl=";for(c in b){d+=parseInt(100*(b[c]/a).toFixed(3));d+="% "+c+"|"}d=d.slice(0,-1);d+='">';div_relationpies.innerHTML+=d}function anl_drawagebars(){var a=new Array(200);for(counter=0;counter<200;counter=counter+1){a[counter]=0}var b=new Array(FrObj.length);for(counter=0;counter<FrObj.length;counter=counter+1){b[counter]=0}var c=new Date;var d=0;var e="";var f={};f.Age=new Array(3);for(counter=0;counter<3;counter=counter+1){f.Age[counter]=0}f.Id=new Array(3);for(counter=0;counter<3;counter=counter+1){f.Id[counter]=0}var g={};g.Age=new Array(3);for(counter=0;counter<3;counter=counter+1){g.Age[counter]=100}g.Id=new Array(3);for(counter=0;counter<3;counter=counter+1){g.Id[counter]=0}for(counter=0;counter<FrObj.length;counter=counter+1){if(FrObj[counter].birthday!=undefined){if(FrObj[counter].birthday.length==10){birthyearspec=birthyearspec+1;b[counter]=c.getFullYear()-parseInt(FrObj[counter].birthday.substr(6,4));if(c.getMonth()+1<parseInt(FrObj[counter].birthday.substr(0,2))){b[counter]=b[counter]-1}else if(c.getMonth()+1==parseInt(FrObj[counter].birthday.substr(0,2))){if(c.getDate()<parseInt(FrObj[counter].birthday.substr(3,2))){b[counter]=b[counter]-1}}if(b[counter]>f.Age[0]){f.Age[2]=f.Age[1];f.Age[1]=f.Age[0];f.Id[2]=f.Id[1];f.Id[1]=f.Id[0];f.Age[0]=b[counter];f.Id[0]=counter}else if(b[counter]>f.Age[1]){f.Age[2]=f.Age[1];f.Id[2]=f.Id[1];f.Age[1]=b[counter];f.Id[1]=counter}else if(b[counter]>f.Age[2]){f.Age[2]=b[counter];f.Id[2]=counter}if(b[counter]<g.Age[0]){g.Age[2]=g.Age[1];g.Age[1]=g.Age[0];g.Id[2]=g.Id[1];g.Id[1]=g.Id[0];g.Age[0]=b[counter];g.Id[0]=counter}else if(b[counter]<g.Age[1]){g.Age[2]=g.Age[1];g.Id[2]=g.Id[1];g.Age[1]=b[counter];g.Id[1]=counter}else if(b[counter]<g.Age[2]){g.Age[2]=b[counter];g.Id[2]=counter}a[b[counter]]=a[b[counter]]+1;if(a[b[counter]]>d){d=a[b[counter]]}}}}if(birthyearspec==0){div_agebars.innerHTML+="<br>Not enough friends specified their date of birth to display this graph.";return}div_agebars.innerHTML+="Of all your Facebook friends "+birthyearspec+" specified their full date of birth.";for(counter=0;counter<100;counter=counter+1){totalforavg=totalforavg+a[counter]*counter}div_agebars.innerHTML+="<br>The average age of your friends is "+(totalforavg/birthyearspec).toFixed(1)+".";e="https://chart.googleapis.com/chart?chxt=x,x,y&chf=bg,s,00000000&chxl=1:|||||Age|0:|%23 of people|&cht=bvs&chco=76A4FB&chs=720x200&chbh=7,1&chd=t:";e+=(100*a[11]/d).toFixed(2);for(counter=12;counter<=90;counter=counter+1){e+=","+(100*a[counter]/d).toFixed(2)}e+="&chxr=0,10,90,5|2,0,"+d;div_agebars.innerHTML+='<br><br><img src="'+e+'"><br>';var h="";h+="<div style='width:300px; float: left;'>";h+="<br>Youngest friends: <br>";for(counter=0;counter<3;counter=counter+1){h+="<img src='"+FrObj[g.Id[counter]].picture.data.url+"' style='width:50; float:left; margin:8px;'>";h+="<br>"+FrObj[g.Id[counter]].name+"<br>"+g.Age[counter]+" years old";h+="<br style='clear: both;'>"}h+="</div><div style='width:300px; float: left;'>";h+="<br>Oldest friends: <br>";for(counter=0;counter<3;counter=counter+1){h+="<img src='"+FrObj[f.Id[counter]].picture.data.url+"' style='width:50; float:left; margin:8px;'>";h+="<br>"+FrObj[f.Id[counter]].name+"<br>"+f.Age[counter]+" years old";h+="<br style='clear: both;'>"}h+="</div><br style='clear: both;'>";div_agebars.innerHTML+=h;poststrage="\n* Average age of my friends: "+(totalforavg/birthyearspec).toFixed(1)}function anl_drawfriendsmap(){for(counter=0;counter<FrObj.length;counter=counter+1){if(FrObj[counter].location!=undefined){if(FrObj[counter].location.name!=undefined){FLO[locnum]=FrObj[counter];locnum++}}}div_friendsmap_title.innerHTML+="Of all your Facebook friends "+locnum+" specified their location.";div_friendsmap_numload.innerHTML="(loaded 0 of "+locnum+")<br><br>";div_friendsmap_title.innerHTML+="<br>Loading is a bit slow due to Google Maps API fair use policy. To see the name at a marker, hover your mouse over it. ";div_friendsmap_title.innerHTML+="To see all people living in one city, zoom in on the relevant marker to a high zoom level.";var a;var b=0;myLatlng=new google.maps.LatLng(40,-35);myOptions={zoom:2,center:myLatlng,mapTypeId:google.maps.MapTypeId.ROADMAP};map=new google.maps.Map(div_friendsmap_map,myOptions);geocoder=new google.maps.Geocoder;do1000markers()}function post_ag(){var a="Of my Facebook friends "+parseInt(femaleperc*100)+"% is female and "+parseInt(maleperc*100)+"% is male. Their average age is "+(totalforavg/birthyearspec).toFixed(1)+". Check out your own stats!";FB.ui({method:"feed",name:"Facebook Friends & Profile Statistics",link:"https://apps.facebook.com/statistics",description:a,message:""},function(a){if(a&&a.post_id){alert("Post was published on your wall. Thanks!")}else{alert("Post was not published. Try again!")}})}function post_wallinfo(){var a=topnamestr[0]+" posted most on my wall, followed by "+topnamestr[1]+"! Check out your own stats!";FB.ui({method:"feed",name:"Facebook Friends & Profile Statistics",link:"https://apps.facebook.com/statistics",description:a,message:""},function(a){if(a&&a.post_id){alert("Post was published.")}else{alert("Post was not published.")}})}function post_joindateinfo(){var a="Of all my Facebook friends, "+FrObj[0].name+" joined Facebook first, already in "+firstjoinyear+"! Check out your own stats!";FB.ui({method:"feed",name:"Facebook Friends & Profile Statistics",link:"https://apps.facebook.com/statistics",description:a,message:""},function(a){if(a&&a.post_id){alert("Post was published.")}else{alert("Post was not published.")}})}function post_aboutapp(){var a="Check out your friends' stats at Facebook Friends & Profile Statistics!";var b="Stats about my friends: ";if(document.forms[0].cb6.checked){b+=poststrmusic}if(document.forms[0].cb7.checked){b+=poststrmovie}if(document.forms[0].cb8.checked){b+=poststrtv}if(document.forms[0].cb9.checked){b+=poststrbook}if(document.forms[0].cb1.checked){b+=poststrage}if(document.forms[0].cb2.checked){b+=poststrgender}if(document.forms[0].cb3.checked){b+=poststrwallpost}if(document.forms[0].cb4.checked){b+=poststrfbjoinf}if(document.forms[0].cb5.checked){b+=poststrfbjoinl}if(document.forms[0].cb10.checked){b+=poststrname}var c={};c["message"]=b;c["name"]="Facebook Friends & Profile Statistics";c["description"]=a;c["link"]="https://apps.facebook.com/statistics";c["picture"]="https://fpl.websites.xs4all.nl/FPS/v2/chart128.png";c["caption"]="Stats about your friends!";FB.api("/me/feed","post",c,function(a){if(!a||a.error){alert("Oops! Couldn't publish the post.")}else{alert("Posted on your wall, thanks for using!")}})}function showpublishlink(){}function gcandmark(a){numloaded++;if(a!=undefined){if(numloaded<=locnum){div_friendsmap_numload.innerHTML="(loaded "+numloaded+" of "+locnum+")<br><br>"}geocoder.geocode({address:a.location.name},function(b,c){if(c==google.maps.GeocoderStatus.OK){var d=new google.maps.LatLng(b[0].geometry.location.lat()-.005+Math.random()*.01,b[0].geometry.location.lng()-.005+Math.random()*.01);gcmarker=new google.maps.Marker({position:d,map:map,title:a.name})}else{}})}}function getfrinfo(){FB.api("/me/friends?fields=name,id,gender,birthday,locale,location,relationship_status,picture",function(a){FrObj=a.data;div_loading.style.display="none";div_app.style.visibility="visible";scroll(0,0);drawstats()})}function anl_titleinfo(){div_title.innerHTML+="<br>Statistics for "+FrObj.length+" of your Facebook friends (excluding private profiles)"}function anl_showphotoinfo(){div_photoinfo.innerHTML+="<br>(loading...)";FB.api({method:"fql.multiquery",queries:{query1:"SELECT images, object_id, pid, link FROM photo WHERE pid IN (SELECT pid FROM photo_tag WHERE subject=me()) OR aid IN (SELECT aid FROM album WHERE owner=me())",query2:"SELECT text, object_id FROM comment WHERE object_id IN (SELECT object_id FROM #query1)",query3:"SELECT object_id FROM like WHERE object_id IN (SELECT object_id FROM #query1)"}},function(a){PhotoObj=a;div_photoinfo.innerHTML=div_photoinfo.innerHTML.slice(0,-16);if(PhotoObj[0].fql_result_set.length==0){div_photoinfo.innerHTML+="<br>Couldn't find enough photos to make a ranking.";return}div_photoinfo.innerHTML+="These are the photos uploaded by you or with your tag in it, ranked by most comments and likes.<br><br>";for(counter=0;counter<PhotoObj[0].fql_result_set.length;counter=counter+1){cmts=0;for(ctr2=0;ctr2<PhotoObj[1].fql_result_set.length;ctr2=ctr2+1){if(PhotoObj[1].fql_result_set[ctr2].object_id==PhotoObj[0].fql_result_set[counter].object_id){cmts=cmts+1}}PhotoObj[0].fql_result_set[counter].cmts=cmts;PhotoObj[0].fql_result_set[counter].interacts=cmts;likes=0;for(ctr2=0;ctr2<PhotoObj[2].fql_result_set.length;ctr2=ctr2+1){if(PhotoObj[2].fql_result_set[ctr2].object_id==PhotoObj[0].fql_result_set[counter].object_id){likes=likes+1}}PhotoObj[0].fql_result_set[counter].likes=likes;PhotoObj[0].fql_result_set[counter].interacts+=likes}var b=new Array(5);for(counter=0;counter<PhotoObj[0].fql_result_set.length;counter=counter+1){b[counter]=0}var c=0;var d=0;for(abc=0;abc<5;abc=abc+1){for(counter=0;counter<PhotoObj[0].fql_result_set.length;counter=counter+1){if(PhotoObj[0].fql_result_set[counter].interacts>c){for(bcd=0;bcd<abc;bcd=bcd+1){if(!(counter==b[bcd])){d=d+1}}if(d==abc){b[abc]=counter;c=PhotoObj[0].fql_result_set[counter].interacts}d=0}}if(c>0){div_photoinfo.innerHTML+="<table><tr><td>"+(abc+1)+". </td><td>"+'<a href="'+PhotoObj[0].fql_result_set[b[abc]].link+'"><img height="100" src="'+PhotoObj[0].fql_result_set[b[abc]].images[2].source+'"></a>'+"</td><td><img src='msgicon.png' class='smallicon'>"+PhotoObj[0].fql_result_set[b[abc]].cmts+" comments<br><img src='likeicon.png' class='smallicon'>"+PhotoObj[0].fql_result_set[b[abc]].likes+" likes"+"</td></tr></table>"}c=0}})}function anl_showpopularlikes(){div_populartvshows.innerHTML="<br>Your friends' favorite TV shows:<br>(loading...)<br><br><br>";div_popularmusic.innerHTML="<br>Your friends' favorite music:<br>(loading...)<br><br><br>";div_popularbooks.innerHTML="<br>Your friends' favorite books:<br>(loading...)<br><br><br>";div_popularfirstnames.innerHTML="<br>Your friends' most common first names:<br>(loading...)<br><br>";var a=0;var b;FB.api({method:"fql.query",query:"SELECT movies FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me())"},function(c){div_popularmovies.innerHTML+="<br><br>Your friends' favorite movies:<br>";var d=new Array(1);var e=new Array(1);var f=0;var g=c;a=0;for(counter=0;counter<g.length;counter=counter+1){if(g[counter].movies){var h=new Array;h=g[counter].movies.split(",");for(i=0;i<h.length;i=i+1){for(j=0;j<d.length;j=j+1){if(h[i]==d[j]){e[j]=e[j]+1;f=1;break}}if(f==0){d.push(h[i]);e.push(1)}f=0}}}for(j=0;j<3;j=j+1){for(i=0;i<d.length;i=i+1){if(e[i]>a){b=i;a=e[i]}}if(!b){div_popularmovies.innerHTML+="Oops! Not enough friends specified their movie preferences.";break}addstr="";addstr+="<div style='width:700; height:30; position:absolute; margin:6;'>&nbsp"+d[b]+" ("+e[b]+" likes)"+"</div><span style='background-color:#C2DFFF; height:30; margin:3;'>";for(k=0;k<e[b];k=k+1){addstr+="&nbsp&nbsp"}addstr+="</span><br>";div_popularmovies.innerHTML+=addstr;e[b]=0;a=0;if(j==0){poststrmovie="\n* My friends' favorite movie: "+d[b]}}});FB.api({method:"fql.query",query:"SELECT tv FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me())"},function(c){div_populartvshows.innerHTML="<br>Your friends' favorite TV shows:<br>";var d=new Array(1);var e=new Array(1);var f=0;var g=c;a=0;for(counter=0;counter<g.length;counter=counter+1){if(g[counter].tv){var h=new Array;h=g[counter].tv.split(",");for(i=0;i<h.length;i=i+1){for(j=0;j<d.length;j=j+1){if(h[i]==d[j]){e[j]=e[j]+1;f=1;break}}if(f==0){d.push(h[i]);e.push(1)}f=0}}}for(j=0;j<3;j=j+1){for(i=0;i<d.length;i=i+1){if(e[i]>a){b=i;a=e[i]}}if(!b){div_populartvshows.innerHTML+="Oops! Not enough friends specified their TV show preferences.";break}addstr="";addstr+="<div style='width:700; height:30; position:absolute; margin:6;'>&nbsp"+d[b]+" ("+e[b]+" likes)"+"</div><span style='background-color:#C2DFFF; height:30; margin:3;'>";for(k=0;k<e[b];k=k+1){addstr+="&nbsp&nbsp"}addstr+="</span><br>";div_populartvshows.innerHTML+=addstr;e[b]=0;a=0;if(j==0){poststrtv="\n* My friends' favorite TV show: "+d[b]}}});FB.api({method:"fql.query",query:"SELECT music FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me())"},function(c){var d=new Array(1);var e=new Array(1);var f=0;var g=c;a=0;for(counter=0;counter<g.length;counter=counter+1){if(g[counter].music){var h=new Array;h=g[counter].music.split(",");for(i=0;i<h.length;i=i+1){for(j=0;j<d.length;j=j+1){if(h[i]==d[j]){e[j]=e[j]+1;f=1;break}}if(f==0){d.push(h[i]);e.push(1)}f=0}}}div_popularmusic.innerHTML="<br>Your friends' favorite music:<br>";for(j=0;j<3;j=j+1){for(i=0;i<d.length;i=i+1){if(e[i]>a){b=i;a=e[i]}}if(!b){div_popularmusic.innerHTML+="Oops! Not enough friends specified their musical preferences.";break}addstr="";addstr+="<div style='width:700; height:30; position:absolute; margin:6;'>&nbsp"+d[b]+" ("+e[b]+" likes)"+"</div><span style='background-color:#C2DFFF; height:30; margin:3;'>";for(k=0;k<e[b];k=k+1){addstr+="&nbsp&nbsp"}addstr+="</span><br>";div_popularmusic.innerHTML+=addstr;e[b]=0;a=0;if(j==0){poststrmusic="\n* My friends' favorite music: "+d[b]}}});FB.api({method:"fql.query",query:"SELECT books FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me())"},function(c){div_popularbooks.innerHTML="<br>Your friends' favorite books:<br>";var d=new Array(1);var e=new Array(1);var f=0;var g=c;a=0;for(counter=0;counter<g.length;counter=counter+1){if(g[counter].books){var h=new Array;h=g[counter].books.split(",");for(i=0;i<h.length;i=i+1){for(j=0;j<d.length;j=j+1){if(h[i]==d[j]){e[j]=e[j]+1;f=1;break}}if(f==0){d.push(h[i]);e.push(1)}f=0}}}for(j=0;j<3;j=j+1){for(i=0;i<d.length;i=i+1){if(e[i]>a){b=i;a=e[i]}}if(!b){div_popularbooks.innerHTML+="Oops! Not enough friends specified their book preferences.";break}addstr="";addstr+="<div style='width:700; height:30; position:absolute; margin:6;'>&nbsp"+d[b]+" ("+e[b]+" likes)"+"</div><span style='background-color:#C2DFFF; height:30; margin:3;'>";for(k=0;k<e[b];k=k+1){addstr+="&nbsp&nbsp"}addstr+="</span><br>";div_popularbooks.innerHTML+=addstr;e[b]=0;a=0;if(j==0){poststrbook="\n* My friends' favorite book: "+d[b]}}});FB.api({method:"fql.query",query:"SELECT first_name FROM user WHERE uid IN (SELECT uid2 FROM friend WHERE uid1 = me())"},function(c){div_popularfirstnames.innerHTML="<br>Most common first names among your friends:<br>";var d=new Array(1);var e=new Array(1);var f=0;var g=c;a=0;for(counter=0;counter<g.length;counter=counter+1){if(g[counter].first_name){var h=new Array;h=g[counter].first_name.split(",");for(i=0;i<h.length;i=i+1){for(j=0;j<d.length;j=j+1){if(h[i]==d[j]){e[j]=e[j]+1;f=1;break}}if(f==0){d.push(h[i]);e.push(1)}f=0}}}for(j=0;j<3;j=j+1){for(i=0;i<d.length;i=i+1){if(e[i]>a){b=i;a=e[i]}}if(!b){div_popularfirstnames.innerHTML+="Oops! Didn't find enough friends to do this.";break}addstr="";addstr+="<div style='width:700; height:30; position:absolute; margin:6;'>&nbsp"+d[b]+" ("+e[b]+" friends)"+"</div><span style='background-color:#C2DFFF; height:30; margin:3;'>";for(k=0;k<e[b];k=k+1){addstr+="&nbsp&nbsp"}addstr+="</span><br>";div_popularfirstnames.innerHTML+=addstr;e[b]=0;a=0;if(j==0){poststrname="\n* My friends' most common first name: "+d[b]}}})}function drawstats(){anl_drawagebars();anl_drawgenderpie();anl_drawrelationpies();anl_showwallposters();anl_showwallposts();anl_showphotoinfo();anl_showjoindateinfo();anl_drawfriendsmap();anl_showpopularlikes();showpublishlink();FB.Canvas.setAutoGrow()}var div_title=document.getElementById("div_title");var div_slogan=document.getElementById("div_slogan");var div_loading=document.getElementById("div_loading");var div_app=document.getElementById("div_app");var div_agebars=document.getElementById("div_agebars");var div_genderpie=document.getElementById("div_genderpie");var div_relationpies=document.getElementById("div_relationpies");var div_statusupdates=document.getElementById("div_statusupdates");var div_wallposters=document.getElementById("div_wallposters");var div_wallposts=document.getElementById("div_wallposts");var div_photoinfo=document.getElementById("div_photoinfo");var div_joindateinfo_title1=document.getElementById("div_joindateinfo_title1");var div_joindateinfo_name1=document.getElementById("div_joindateinfo_name1");var div_joindateinfo_name2=document.getElementById("div_joindateinfo_name2");var div_joindateinfo_name3=document.getElementById("div_joindateinfo_name3");var div_joindateinfo_title2=document.getElementById("div_joindateinfo_title2");var div_joindateinfo_name4=document.getElementById("div_joindateinfo_name4");var div_joindateinfo_name5=document.getElementById("div_joindateinfo_name5");var div_joindateinfo_name6=document.getElementById("div_joindateinfo_name6");var div_friendsmap=document.getElementById("div_friendsmap");var div_friendsmap_title=document.getElementById("div_friendsmap_title");var div_friendsmap_numload=document.getElementById("div_friendsmap_numload");var div_friendsmap_map=document.getElementById("div_friendsmap_map");var div_popularmovies=document.getElementById("div_popularmovies");var div_populartvshows=document.getElementById("div_populartvshows");var div_popularmusic=document.getElementById("div_popularmusic");var div_popularbooks=document.getElementById("div_popularbooks");var div_popularfirstnames=document.getElementById("div_popularfirstnames");var div_publishlink=document.getElementById("div_publishlink");var div_likebutton=document.getElementById("div_likebutton");var div_writereview=document.getElementById("div_writereview");var div_privacy=document.getElementById("div_privacy");var div_debug=document.getElementById("div_debug");var poststrage;var poststrgender;var poststrwallpost;var poststrfbjoinf;var poststrfbjoinl;var poststrmovie;var poststrmusic;var poststrbook;var poststrtv;var poststrname;var StatusUpdatesCommentCount=new Array;var StatusUpdatesLikeCount=new Array;var StatusUpdatesMessages=new Array;var StatusUpdatesDates=new Array;var myLatlng;var map;var geocoder;var FLO=new Array;var topnamestr=new Array(5);for(counter=0;counter<1e4;counter=counter+1){topnamestr[counter]=""}var totalforavg=0;var birthyearspec=0;var maleperc=0;var femaleperc=0;var firstjoinyear=2005;var numloaded=0;var locnum=0;var MeObj;var MePic;var FrObj;var FrLikesObj;var PhotoObj;var MyWallObj;var MyPostsObj;var WallObj;var TopInteractorIds=new Array(5);for(counter=0;counter<5;counter=counter+1){TopInteractorIds[counter]=0}var TopStatusUpdates=new Array(5);for(counter=0;counter<5;counter=counter+1){TopStatusUpdates[counter]=0}var WallInteracts={};setTimeout('$("#loadingimg").attr("src","https://chart.googleapis.com/chart?cht=v&chs=200x100&chf=bg,s,00000000&chd=t:100,80,60,30,30,30,10&chco=63C6DE,FF6342,FFFFFF00&chdl=A|B|C");',500);setTimeout('$("#loadingimg").attr("src","https://chart.googleapis.com/chart?cht=v&chs=200x100&chf=bg,s,00000000&chd=t:100,80,60,30,30,30,10&chco=63C6DE,FF6342,ADDE63&chdl=A|B|C");',1e3);setTimeout('$("#loadingimg").attr("src","https://chart.googleapis.com/chart?cht=v&chs=200x100&chf=bg,s,00000000&chd=t:100,80,60,30,30,30,10&chco=63C6DE,FFFFFF00,FFFFFF00&chdl=A|B|C");',1500);setInterval(function(){setTimeout('$("#loadingimg").attr("src","https://chart.googleapis.com/chart?cht=v&chs=200x100&chf=bg,s,00000000&chd=t:100,80,60,30,30,30,10&chco=63C6DE,FF6342,ADDE63&chdl=A|B|C");',1e3);setTimeout('$("#loadingimg").attr("src","https://chart.googleapis.com/chart?cht=v&chs=200x100&chf=bg,s,00000000&chd=t:100,80,60,30,30,30,10&chco=63C6DE,FF6342,FFFFFF00&chdl=A|B|C");',500);setTimeout('$("#loadingimg").attr("src","https://chart.googleapis.com/chart?cht=v&chs=200x100&chf=bg,s,00000000&chd=t:100,80,60,30,30,30,10&chco=63C6DE,FFFFFF00,FFFFFF00&chdl=A|B|C");',1500)},1500);FB.getLoginStatus(function(a){MeObj=a;getfrinfo();getmypic()})